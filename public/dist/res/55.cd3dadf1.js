(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{195:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"i",(function(){return i})),n.d(e,"h",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"f",(function(){return d})),n.d(e,"g",(function(){return f}));var o="#1989fa",i="#fff",a="#969799",r="van-hairline",c=r+"--top",l=r+"--left",s=r+"--bottom",u=r+"--surround",d=r+"--top-bottom",f=r+"-unset--top-bottom"},196:function(t,e,n){"use strict";function o(t,e){var n=e.to,o=e.url,i=e.replace;if(n&&t){var a=t[i?"replace":"push"](n);a&&a.catch&&a.catch((function(t){if(t&&"NavigationDuplicated"!==t.name)throw t}))}else o&&(i?location.replace(o):location.href=o)}function i(t){o(t.parent&&t.parent.$router,t.props)}n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return a}));var a={url:String,replace:Boolean,to:[String,Object]}},199:function(t,e,n){"use strict";var o=n(3),i=n(7),a=n.n(i),r=n(9),c=n(8),l=n(195),s=n(196),u=n(17),d=n(18),f=Object(r.a)("button"),h=f[0],p=f[1];function m(t,e,n,o){var i,r=e.tag,f=e.icon,h=e.type,m=e.color,g=e.plain,v=e.disabled,b=e.loading,C=e.hairline,y=e.loadingText,w={};m&&(w.color=g?m:l.i,g||(w.background=m),-1!==m.indexOf("gradient")?w.border=0:w.borderColor=m);var O,B,S=[p([h,e.size,{plain:g,disabled:v,hairline:C,block:e.block,round:e.round,square:e.square}]),(i={},i[l.d]=C,i)];return t(r,a()([{style:w,class:S,attrs:{type:e.nativeType,disabled:v},on:{click:function(t){b||v||(Object(c.a)(o,"click",t),Object(s.a)(o))},touchstart:function(t){Object(c.a)(o,"touchstart",t)}}},Object(c.b)(o)]),[(B=[],b?B.push(t(d.a,{class:p("loading"),attrs:{size:e.loadingSize,type:e.loadingType,color:"currentColor"}})):f&&B.push(t(u.a,{attrs:{name:f},class:p("icon")})),(O=b?y:n.default?n.default():e.text)&&B.push(t("span",{class:p("text")},[O])),B)])}m.props=Object(o.a)({},s.c,{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"}}),e.a=h(m)},210:function(t,e,n){"use strict";n(167),n(169),n(168),n(212)},211:function(t,e,n){"use strict";var o,i=n(3),a=n(2),r=n.n(a),c=n(9),l=n(14),s=n(195),u=n(21),d=n(199),f=Object(c.a)("dialog"),h=f[0],p=f[1],m=f[2],g=h({mixins:[u.a],props:{title:String,width:[Number,String],message:String,className:null,callback:Function,beforeClose:Function,messageAlign:String,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showCancelButton:Boolean,transition:{type:String,default:"van-dialog-bounce"},showConfirmButton:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!1}},data:function(){return{loading:{confirm:!1,cancel:!1}}},methods:{onClickOverlay:function(){this.handleAction("overlay")},handleAction:function(t){var e=this;this.$emit(t),this.beforeClose?(this.loading[t]=!0,this.beforeClose(t,(function(n){!1!==n&&e.loading[t]&&e.onClose(t),e.loading.confirm=!1,e.loading.cancel=!1}))):this.onClose(t)},onClose:function(t){this.close(),this.callback&&this.callback(t)},onOpened:function(){this.$emit("opened")},onClosed:function(){this.$emit("closed")}},render:function(){var t,e,n=this,o=arguments[0];if(this.shouldRender){var i=this.message,a=this.messageAlign,r=this.slots(),c=this.slots("title")||this.title,u=c&&o("div",{class:p("header",{isolated:!i&&!r})},[c]),f=(r||i)&&o("div",{class:p("content")},[r||o("div",{domProps:{innerHTML:i},class:p("message",(t={"has-title":c},t[a]=a,t))})]),h=this.showCancelButton&&this.showConfirmButton,g=o("div",{class:[s.e,p("footer",{buttons:h})]},[this.showCancelButton&&o(d.a,{attrs:{size:"large",loading:this.loading.cancel,text:this.cancelButtonText||m("cancel")},class:p("cancel"),style:{color:this.cancelButtonColor},on:{click:function(){n.handleAction("cancel")}}}),this.showConfirmButton&&o(d.a,{attrs:{size:"large",loading:this.loading.confirm,text:this.confirmButtonText||m("confirm")},class:[p("confirm"),(e={},e[s.c]=h,e)],style:{color:this.confirmButtonColor},on:{click:function(){n.handleAction("confirm")}}})]);return o("transition",{attrs:{name:this.transition},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[o("div",{directives:[{name:"show",value:this.value}],attrs:{role:"dialog","aria-labelledby":this.title||i},class:[p(),this.className],style:{width:Object(l.a)(this.width)}},[u,f,g])])}}}),v=n(1);function b(t){return v.d?Promise.resolve():new Promise((function(e,n){var a;o&&(a=o.$el,document.body.contains(a))||(o&&o.$destroy(),(o=new(r.a.extend(g))({el:document.createElement("div"),propsData:{lazyRender:!1}})).$on("input",(function(t){o.value=t}))),Object(i.a)(o,b.currentOptions,t,{resolve:e,reject:n})}))}b.defaultOptions={value:!0,title:"",width:"",message:"",overlay:!0,className:"",lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:null,messageAlign:"",getContainer:"body",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!1,closeOnClickOverlay:!1,callback:function(t){o["confirm"===t?"resolve":"reject"](t)}},b.alert=b,b.confirm=function(t){return b(Object(i.a)({showCancelButton:!0},t))},b.close=function(){o&&(o.value=!1)},b.setDefaultOptions=function(t){Object(i.a)(b.currentOptions,t)},b.resetDefaultOptions=function(){b.currentOptions=Object(i.a)({},b.defaultOptions)},b.resetDefaultOptions(),b.install=function(){r.a.use(g)},b.Component=g,r.a.prototype.$dialog=b;e.a=b},212:function(t,e,n){},294:function(t,e,n){},423:function(t,e,n){"use strict";var o=n(294);n.n(o).a},581:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this.$createElement;return(this._self._c||t)("iframe",{attrs:{id:"map-container",src:this.fullUrl,frameborder:"0",width:"100%",height:"100%"}})};o._withStripped=!0;n(210);var i=n(211),a=(n(22),n(5)),r={name:"MapSelectAddress",data:function(){return{fullUrl:"",baseUrl:"https://m.amap.com/picker/?keywords=写字楼,小区,学校&zoom=15&radius=1000&total=20",key:"&key=1ee27ce137e72c3a50fdfa27cb2214f4",location:"&center="}},mounted:function(){this.controllerInitializationMapIframe()},methods:{initializationLoadAmapSourceOperate:function(){var t=this;return new Promise((function(e,n){t.$util.loadSourceUrl({mode:"script",url:"https://webapi.amap.com/maps?v=1.4.15&key=1ee27ce137e72c3a50fdfa27cb2214f4&plugin=AMap.Geocoder",name:"gaode-map",resolve:e,reject:n})}))},amapControllerOperate:function(){this.map.setCenter(this.longitude,this.latitude),new AMap.Marker({position:map.getCenter(),icon:"//a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-default.png",offset:new AMap.Pixel(-13,-30),draggable:!0,cursor:"move",raiseOnDrag:!0}).setMap(this.map)},initializationWeChatSDKEnvironment:function(){var t=this;return new Promise((function(e,n){t.$util.requestLoadWeChatSDKOperate(["checkJsApi","openLocation","getLocation"]).then(t.$util.requestWeChatAuthorizeDataset).then((function(t){e()})).catch((function(t){n(t)}))}))},requestWeChatLocationInterface:function(){return new Promise((function(t,e){wx.getLocation({type:"gcj02",success:function(e){t(e)},cancel:function(t){e(t)}})}))},requestGetUserLocationData:function(t){var e=this;return new Promise((function(n,o){e.geocoder||(e.geocoder=new AMap.Geocoder({radius:100,extensions:"all"})),e.geocoder.getAddress([t.longitude,t.latitude],(function(e,i){"complete"===e&&"OK"===i.info&&i.regeocode?n({res:t,result:i}):o()}))}))},controllerDemo:function(){var t=this;this.initializationLoadAmapSourceOperate().then((function(e){t.initializationWeChatSDKEnvironment().then(t.requestWeChatLocationInterface).then(t.requestGetUserLocationData).then((function(e){var n=e.res;e.result;t.longitude=n.longitude,t.latitude=n.latitude,t.neighborhood=n.addressComponent.neighborhood,t.formattedAddress=n.regeocode.formattedAddress,t.amapControllerOperate()})).catch((function(t){console.log("wx-location-amap",t)}))})).catch((function(t){console.log("mounted",t)}))},controllerInitializationMapIframe:function(t){var e=this;a.a.loading({message:"加载中",loadingType:"spinner",forbidClick:!0,duration:0}),this.initializationWeChatSDKEnvironment().then(this.requestWeChatLocationInterface).then((function(t){e.fullUrl=e.baseUrl+e.location+(t.longitude+",")+t.latitude+e.key,e.controllerEstablishIframeEventListener(),setTimeout((function(){a.a.clear()}),1e3)})).catch((function(t){a.a.clear(),i.a.alert({title:"提示",message:"此功能需要在微信端使用"}).then((function(){e.$router.push("/shop/regedit")}))}))},controllerEstablishIframeEventListener:function(){var t=this,e=document.getElementById("map-container").contentWindow;document.getElementById("map-container").onload=function(){e.postMessage("hello","https://m.amap.com/picker/")},window.addEventListener("message",(function(e){i.a.confirm({title:"确定要选择此地址吗？",message:e.data.name}).then((function(){t.$router.push({name:"ShopRegedit",params:{name:e.data.name,location:e.data.location}})}))}),!1)}}},c=(n(423),n(16)),l=Object(c.a)(r,o,[],!1,null,null,null);l.options.__file="src/views/public/map.vue";e.default=l.exports}}]);