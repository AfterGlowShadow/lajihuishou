(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{210:function(t,e,n){"use strict";n(167),n(169),n(168),n(212)},211:function(t,e,n){"use strict";var o,a=n(3),s=n(2),r=n.n(s),i=n(9),c=n(14),l=n(195),u=n(21),d=n(199),f=Object(i.a)("dialog"),h=f[0],v=f[1],m=f[2],p=h({mixins:[u.a],props:{title:String,width:[Number,String],message:String,className:null,callback:Function,beforeClose:Function,messageAlign:String,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showCancelButton:Boolean,transition:{type:String,default:"van-dialog-bounce"},showConfirmButton:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!1}},data:function(){return{loading:{confirm:!1,cancel:!1}}},methods:{onClickOverlay:function(){this.handleAction("overlay")},handleAction:function(t){var e=this;this.$emit(t),this.beforeClose?(this.loading[t]=!0,this.beforeClose(t,(function(n){!1!==n&&e.loading[t]&&e.onClose(t),e.loading.confirm=!1,e.loading.cancel=!1}))):this.onClose(t)},onClose:function(t){this.close(),this.callback&&this.callback(t)},onOpened:function(){this.$emit("opened")},onClosed:function(){this.$emit("closed")}},render:function(){var t,e,n=this,o=arguments[0];if(this.shouldRender){var a=this.message,s=this.messageAlign,r=this.slots(),i=this.slots("title")||this.title,u=i&&o("div",{class:v("header",{isolated:!a&&!r})},[i]),f=(r||a)&&o("div",{class:v("content")},[r||o("div",{domProps:{innerHTML:a},class:v("message",(t={"has-title":i},t[s]=s,t))})]),h=this.showCancelButton&&this.showConfirmButton,p=o("div",{class:[l.e,v("footer",{buttons:h})]},[this.showCancelButton&&o(d.a,{attrs:{size:"large",loading:this.loading.cancel,text:this.cancelButtonText||m("cancel")},class:v("cancel"),style:{color:this.cancelButtonColor},on:{click:function(){n.handleAction("cancel")}}}),this.showConfirmButton&&o(d.a,{attrs:{size:"large",loading:this.loading.confirm,text:this.confirmButtonText||m("confirm")},class:[v("confirm"),(e={},e[l.c]=h,e)],style:{color:this.confirmButtonColor},on:{click:function(){n.handleAction("confirm")}}})]);return o("transition",{attrs:{name:this.transition},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[o("div",{directives:[{name:"show",value:this.value}],attrs:{role:"dialog","aria-labelledby":this.title||a},class:[v(),this.className],style:{width:Object(c.a)(this.width)}},[u,f,p])])}}}),g=n(1);function w(t){return g.d?Promise.resolve():new Promise((function(e,n){var s;o&&(s=o.$el,document.body.contains(s))||(o&&o.$destroy(),(o=new(r.a.extend(p))({el:document.createElement("div"),propsData:{lazyRender:!1}})).$on("input",(function(t){o.value=t}))),Object(a.a)(o,w.currentOptions,t,{resolve:e,reject:n})}))}w.defaultOptions={value:!0,title:"",width:"",message:"",overlay:!0,className:"",lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:null,messageAlign:"",getContainer:"body",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!1,closeOnClickOverlay:!1,callback:function(t){o["confirm"===t?"resolve":"reject"](t)}},w.alert=w,w.confirm=function(t){return w(Object(a.a)({showCancelButton:!0},t))},w.close=function(){o&&(o.value=!1)},w.setDefaultOptions=function(t){Object(a.a)(w.currentOptions,t)},w.resetDefaultOptions=function(){w.currentOptions=Object(a.a)({},w.defaultOptions)},w.resetDefaultOptions(),w.install=function(){r.a.use(p)},w.Component=p,r.a.prototype.$dialog=w;e.a=w},212:function(t,e,n){},250:function(t,e,n){"use strict";var o=n(280),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setData(n),this.setRules(e)}return a(t,[{key:"setData",value:function(t){this.data=t}},{key:"setRules",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.cover;for(var a in(void 0===n||n)&&(this.validators={}),t){var s={};s[a]=t[a],this.validators[a]=new o.a(s)}}},{key:"validate",value:function(t,e){var n=this,o=void 0,a=void 0;"function"==typeof t?(o=t,a=e):"function"==typeof e&&(o=e,a=t);var s=a;this.data&&(a?"string"==typeof a?(s={})[a]=this.data[a]:Array.isArray(a)&&(s={},a.forEach((function(t){s[t]=n.data[t]}))):s=this.data);var r=[];if(s)for(var i in s)if(this.validators[i]){var c={};c[i]=s[i],this.validators[i].validate(c,(function(t){t&&r.push(t[0])}))}o&&o(r.length>0,r)}}]),t}();e.a=function(t,e){return new s(t,e)}},388:function(t,e,n){},524:function(t,e,n){"use strict";var o=n(388);n.n(o).a},600:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"changePassword"},[t._m(0),t._v(" "),n("div",{staticClass:"changePassword_container_content"},[n("div",{staticClass:"normal-form-container bottom-ash-line",staticStyle:{"border-bottom":"none"}},[n("van-field",{attrs:{type:"tel",placeholder:"请输入手机号（登陆账号）","error-message":t.errorMsg.phone},model:{value:t.forma.phone,callback:function(e){t.$set(t.forma,"phone",e)},expression:"forma.phone"}}),t._v(" "),n("van-field",{attrs:{placeholder:"请输入验证码"},model:{value:t.forma.checkCode,callback:function(e){t.$set(t.forma,"checkCode",e)},expression:"forma.checkCode"}},[n("van-button",{staticClass:"check-button",attrs:{slot:"button",size:"small","error-message":t.errorMsg.checkCode,type:"primary",round:""},on:{click:t.sendMobileCode},slot:"button"},[t._v("\n                    "+t._s(t.countdownText)+"\n                ")])],1),t._v(" "),n("van-field",{attrs:{"error-message":t.errorMsg.password,placeholder:"请输入登录密码"},model:{value:t.forma.password,callback:function(e){t.$set(t.forma,"password",e)},expression:"forma.password"}}),t._v(" "),n("van-field",{attrs:{"error-message":t.errorMsg.repassword,placeholder:"请确认登录密码"},model:{value:t.forma.repassword,callback:function(e){t.$set(t.forma,"repassword",e)},expression:"forma.repassword"}})],1)]),t._v(" "),n("div",{staticClass:"changePassword_container_btn"},[n("van-button",{staticClass:"green-background font-size-17 edge-angle-normal",attrs:{type:"primary"},on:{click:t.eventClickSubmit}},[t._v("确认修改")])],1)])};o._withStripped=!0;n(210);var a,s=n(211),r=(n(204),n(199)),i=(n(207),n(209)),c=(n(213),n(214)),l=n(250);function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={name:"changePassword",components:(a={},u(a,c.a.name,c.a),u(a,i.a.name,i.a),u(a,r.a.name,r.a),a),data:function(){return{countdown:0,countdownText:"验证码",forma:{phone:"",checkCode:"",password:"",repassword:""},errorMsg:{phone:"",checkCode:"",password:"",repassword:""},rules:{phone:[{validator:function(t,e,n){e?/^[1][0-9]{10}$/.test(e)?n():n("请输入正确的手机号码"):n("请输入手机号码")}}],checkCode:[{required:!0,message:"请输入验证码"}],password:[{required:!0,message:"请输入登录密码"}],repassword:[{required:!0,message:"请输入确认登录密码"}]}}},created:function(){this.validator=Object(l.a)(this.rules,this.forma)},methods:{resetField:function(t){var e=this;(t=t?Array.isArray(t)?t:[t]:Object.keys(this.errorMsg)).forEach((function(t){e.errorMsg[t]=""}))},validate:function(t,e){var n=this;this.validator.validate((function(e,o){n.resetField(),e&&o.forEach((function(t){n.errorMsg[t.field]=t.message})),t&&t(e,o)}),e)},sendMobileCode:function(){var t=this;this.validate((function(e){if(!e){var n={mobile:t.forma.phone};t.$util.postRequestInterface("/api/home/senMsg",n,(function(t){})),t.countdown=61,t.countdownSubtract()}}),"phone")},countdownSubtract:function(){var t=this;this.countdown>0&&setTimeout((function(){t.countdown-=1,t.countdown>0?(t.countdownText="倒计时"+t.countdown+"s",t.countdownSubtract()):0==t.countdown&&(t.countdownText="验证码")}),1e3)},eventClickSubmit:function(){var t=this;this.validate((function(e,n){if(!e){if(t.forma.password!=t.forma.repassword)return Toast.fail("请确认登录密码"),!1;var o={phone:t.forma.phone,code:t.forma.checkCode,newpwd:t.forma.password,renewpwd:t.forma.repassword};t.$util.postRequestInterface("/api/home/user/forgetpass",o,(function(e){s.a.alert({title:"提示",message:e.msg}).then((function(){t.$router.push("/login")}))}))}}))}}},f=(n(524),n(16)),h=Object(f.a)(d,o,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"changePassword_container_top"},[e("span",[this._v("修改密码")])])}],!1,null,"05aca6b2",null);h.options.__file="src/views/public/changePassword.vue";e.default=h.exports}}]);