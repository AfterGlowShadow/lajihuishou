(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{363:function(e,t,n){},498:function(e,t,n){"use strict";var a=n(363);n.n(a).a},543:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"waiting-point-map"},[n("div",{attrs:{id:"container"}}),e._v(" "),n("div",{staticClass:"address"},[n("p",{},[e._v(e._s(e.neighborhood))]),e._v(" "),n("p",[e._v(e._s(e.formattedAddress))])]),e._v(" "),n("tab-group",{attrs:{dataset:e.navButtonGroup,index:"1",identity:"3"}})],1)};a._withStripped=!0;var o={name:"waiting-point-map",components:{TabGroup:n(219).a},data:function(){return{navButtonGroup:[{name:"暂存点订单",route:{path:"/GeneralRepository/index"}},{name:"待取",route:{path:"/GeneralRepository/waiting-point-map"}},{name:"查询报价",route:{path:"/GeneralRepository/enquiry-quotation"}},{name:"个人中心",route:{path:"/GeneralRepository/personal-center"}}],neighborhood:"暂无名称",formattedAddress:"暂无详细地址，请点击门店显示",map:null,geocoder:null}},mounted:function(){this.initializationLoadAmapSourceOperate().then(this.reqeustShopWaitingPointData).then(this.settingWaitingPointOperate).catch((function(e){console.log(e)}))},methods:{initializationLoadAmapSourceOperate:function(){var e=this;return new Promise((function(t,n){e.$util.loadSourceUrl({mode:"script",url:"https://webapi.amap.com/maps?v=1.4.15&key=1ee27ce137e72c3a50fdfa27cb2214f4&plugin=AMap.Geocoder",name:"gaode-map",resolve:t,reject:n})}))},reqeustShopWaitingPointData:function(){var e=this;return new Promise((function(t,n){var a={token:e.$store.state.options.user.token};e.$util.postRequestInterface("/api/home/order/ordermap",a,{success:function(e){t(e)},fail:n})}))},settingWaitingPointOperate:function(e){var t=this;if(this.map||(this.map=new AMap.Map("container",{resizeEnable:!0,zoom:15})),""!=e.data){var n=e.data,a=n[0],o=a.longitude,r=a.latitude,i=!0,s=!1,u=void 0;try{for(var p,c=function(){var e=p.value,n='<p class="map-sign-title">'+e.username+"</p>",a='<p class="map-sign-number">重量：'+e.zweight+"</p>",o='<p class="map-sign-number">数量：'+e.znumber+"</p>",r=Number(e.znumber)>0?o:a,i=new AMap.Text({text:n+r,anchor:"center",draggable:!1,cursor:"pointer",angle:0,style:{padding:"1rem","margin-bottom":"1rem","border-radius":".25rem","background-color":"white","border-width":0,"box-shadow":"0 2px 6px 0 rgba(114, 124, 245, .5)","text-align":"center","font-size":"1.3rem",color:"#333333"},position:new AMap.LngLat(e.longitude,e.latitude)});i.on("click",(function(n){t.controllerSetAddresDetails(n,e)})),i.setMap(t.map)},l=n[Symbol.iterator]();!(i=(p=l.next()).done);i=!0)c()}catch(e){s=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw u}}n.length>0&&this.map.setCenter(new AMap.LngLat(o,r))}else this.$toast(e.msg)},requestGetUserLocationData:function(e){var t=this;return new Promise((function(n,a){t.geocoder||(t.geocoder=new AMap.Geocoder({radius:100,extensions:"all"})),t.geocoder.getAddress([e.longitude,e.latitude],(function(e,t){"complete"==e&&"OK"==t.info&&t.regeocode?n(t):a()}))}))},controllerSetAddresDetails:function(e,t){var n=this,a=e.lnglat,o=a.lat,r=a.lng;this.requestGetUserLocationData({longitude:r,latitude:o}).then((function(e){n.$router.push({path:"/salesman/collect-details",query:{ordernumber:t.ordernumber}})})).catch((function(e){n.$toast("获取位置信息失败")}))}}},r=(n(498),n(16)),i=Object(r.a)(o,a,[],!1,null,null,null);i.options.__file="src/views/GeneralRepository/waiting-point-map.vue";t.default=i.exports}}]);