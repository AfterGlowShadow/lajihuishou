(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{383:function(e,t,a){},519:function(e,t,a){"use strict";var n=a(383);a.n(n).a},594:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-tabs",{staticClass:"order-list-items fix-order-listing",attrs:{color:"#00CC00"},model:{value:e.tabs.index,callback:function(t){e.$set(e.tabs,"index",t)},expression:"tabs.index"}},[a("van-tab",{attrs:{title:"待上交"}},[a("van-list",{attrs:{finished:e.handin.finished,"finished-text":"没有更多了"},on:{load:function(t){return e.onLoad(e.handin.textType)}},model:{value:e.handin.loading,callback:function(t){e.$set(e.handin,"loading",t)},expression:"handin.loading"}},e._l(e.handin.dataset,(function(t,n){return a("normal-order-list",{key:n,staticClass:"el-item",attrs:{textType:e.handin.textType,ibase:t.base,dataset:t.items,index:n,allSelect:e.handin.allSelectState},on:{onSelectOperate:e.eventOnItemSelectOperate}})})),1)],1),e._v(" "),a("van-tab",{attrs:{title:"待确认"}},[a("van-list",{attrs:{finished:e.confirm.finished,"finished-text":"没有更多了"},on:{load:function(t){return e.onLoad(e.confirm.textType)}},model:{value:e.confirm.loading,callback:function(t){e.$set(e.confirm,"loading",t)},expression:"confirm.loading"}},e._l(e.confirm.dataset,(function(t,n){return a("normal-order-list",{key:n,staticClass:"el-item",attrs:{ibase:t.base,dataset:t.items,textType:e.confirm.textType,index:n},on:{onCancelOrder:e.eventOnCancelOrderItem}})})),1)],1),e._v(" "),a("van-tab",{attrs:{title:"已上交"}},[a("van-list",{attrs:{finished:e.complete.finished,"finished-text":"没有更多了"},on:{load:function(t){return e.onLoad(e.complete.textType)}},model:{value:e.complete.loading,callback:function(t){e.$set(e.complete,"loading",t)},expression:"complete.loading"}},e._l(e.complete.dataset,(function(t,n){return a("normal-order-list",{key:n,staticClass:"el-item",attrs:{ibase:t.base,dataset:t.items,textType:e.complete.textType}})})),1)],1),e._v(" "),a("van-tab",{attrs:{title:"已取消"}},[a("van-list",{attrs:{finished:e.cancel.finished,"finished-text":"没有更多了"},on:{load:function(t){return e.onLoad(e.cancel.textType)}},model:{value:e.cancel.loading,callback:function(t){e.$set(e.cancel,"loading",t)},expression:"cancel.loading"}},e._l(e.cancel.dataset,(function(t,n){return a("normal-order-list",{key:n,staticClass:"el-item",attrs:{ibase:t.base,dataset:t.items,textType:e.cancel.textType}})})),1)],1)],1)};n._withStripped=!0;a(241);var i,s=a(242),r=(a(197),a(198)),o=(a(246),a(249)),l=(a(247),a(248)),d=a(243),c=a(400);function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m={name:"TemOrderListing",components:(i={},u(i,l.a.name,l.a),u(i,o.a.name,o.a),u(i,r.a.name,r.a),u(i,s.a.name,s.a),u(i,"NormalOrderList",d.a),u(i,"NormalOrderHaninList",c.a),i),data:function(){return{tabs:{index:0},handin:{allSelectState:!1,selectItems:[],orderPrice:0,page:0,list_rows:10,loading:!1,finished:!1,textType:"handin",dataset:[]},confirm:{page:0,list_rows:10,loading:!1,finished:!1,textType:"zhuguan-confirm",dataset:[]},complete:{page:0,list_rows:10,loading:!1,finished:!1,textType:"complete",dataset:[]},cancel:{page:0,list_rows:10,loading:!1,finished:!1,textType:"cancel",dataset:[]}}},mounted:function(){this.$route.query.index&&(this.tabs.index=this.$route.query.index)},methods:{getOrderList:function(e){var t=this,a="",n={page:e.page,list_rows:e.list_rows,token:t.$store.state.options.user.token};switch(e.textType){case"zhuguan-confirm":a=1,n.otype=1;break;case"complete":a=2,n.otype=1;break;case"cancel":a=3,n.otype=1;break;default:a=6}4==this.$store.state.options.user.oda.groupid&&(n.outorder=""),a&&(n.status=a),"handin"==e.textType&&(n.is_shangjiao=0);var i=[];this.$util.postRequestInterface("/api/home/order/getlist",n,(function(a){if(e.page=e.page+1,""==a.data)e.loading=!1,e.finished=!0;else{var n=!0,s=!1,r=void 0;try{for(var o,l=a.data.data[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var d=o.value,c=!0,u=!1,m=void 0;try{for(var h,f=d.detail[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value;i.push({title:p.garbagename,number:p.weighting_num,unit:p.danweiming,time:t.$moment(1e3*d.create_time).format("YYYY-MM-DD")})}}catch(e){u=!0,m=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw m}}e.dataset.push({base:{id:d.id,number:d.ordernumber,amount:d.price},items:i}),i=[]}}catch(e){s=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(s)throw r}}e.loading=!1,e.dataset.length>=a.data.count&&(e.finished=!0)}}))},onLoad:function(e){switch(e){case"handin":this.getOrderList(this.handin);break;case"zhuguan-confirm":this.getOrderList(this.confirm);break;case"complete":this.getOrderList(this.complete);break;case"cancel":this.getOrderList(this.cancel)}},eventClickSubmitHandin:function(){this.$router.push({name:"SalesmanHandInOrderConfirm",params:{items:this.handin.selectItems}})},eventOnItemSelectOperate:function(e){if(e.select)this.handin.selectItems.push(this.handin.dataset[e.index]);else for(var t in this.handin.selectItems)if(this.handin.selectItems[t].base.number==this.handin.dataset[e.index].base.number){this.handin.selectItems.splice(t,1);break}var a=0,n=!0,i=!1,s=void 0;try{for(var r,o=this.handin.selectItems[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var l=r.value;a+=parseFloat(l.base.amount)}}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}this.handin.orderPrice=a.toFixed(2)},eventOnCancelOrderItem:function(e){this.confirm.dataset.splice(e,1)}}},h=(a(519),a(16)),f=Object(h.a)(m,n,[],!1,null,"61694a84",null);f.options.__file="src/views/GeneralRepository/order-listing.vue";t.default=f.exports}}]);