(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{368:function(t,a,e){},504:function(t,a,e){"use strict";var i=e(368);e.n(i).a},541:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"predict-price-add"},[e("van-cell-group",[e("van-field",{attrs:{label:"选择分类",placeholder:t.forma.placeholder,"is-link":"",disabled:""},on:{click:function(a){t.dataset.show=!0}}}),t._v(" "),e("div",{staticClass:"account"},[e("div",{staticClass:"title"},[t._v("计算方式")]),t._v(" "),e("van-radio-group",{model:{value:t.forma.radio,callback:function(a){t.$set(t.forma,"radio",a)},expression:"forma.radio"}},t._l(t.forma.unit,(function(a,i){return e("van-radio",{key:i,attrs:{name:i,"checked-color":"#07c160"}},[t._v(t._s(a.danweiming))])})),1)],1),t._v(" "),e("div",{staticClass:"weight van-hairline--top"},[e("van-field",{attrs:{label:"",placeholder:"请输入数值"},model:{value:t.forma.number,callback:function(a){t.$set(t.forma,"number",a)},expression:"forma.number"}})],1)],1),t._v(" "),e("van-button",{attrs:{type:"primary"},on:{click:t.eventClickAddShopCartItem}},[t._v("立即添加")]),t._v(" "),e("van-popup",{style:{height:"80%"},attrs:{position:"bottom"},model:{value:t.dataset.show,callback:function(a){t.$set(t.dataset,"show",a)},expression:"dataset.show"}},[e("div",{staticClass:"two-col-list"},[e("van-sidebar",{model:{value:t.activeKey,callback:function(a){t.activeKey=a},expression:"activeKey"}},t._l(t.classify,(function(a,i){return e("van-sidebar-item",{key:i,attrs:{title:a.title},on:{click:function(e){t.pga=a.id}}})})),1),t._v(" "),e("van-list",{staticClass:"right-list",attrs:{finished:t.dataset.finished,"finished-text":"没有更多了"},on:{load:t.controllerRequestChildOfferList},model:{value:t.dataset.loading,callback:function(a){t.$set(t.dataset,"loading",a)},expression:"dataset.loading"}},t._l(t.dataset.items,(function(a,i){return e("dl",{key:i,staticClass:"offer-list-wrap",on:{click:function(e){return t.eventClickSelectType(a.name,i)}}},[e("dt",{staticClass:"title"},[e("p",[t._v(t._s(a.name))])]),t._v(" "),e("dd",{staticClass:"unit"},t._l(a.danwei,(function(a,i){return e("p",{key:i},[e("span",[t._v(t._s(a.price))]),e("span",[t._v("/"+t._s(a.danweiming))])])})),0)])})),0)],1)])],1)};i._withStripped=!0;e(348);var s,n=e(355),o=(e(349),e(354)),r=(e(197),e(198)),l=(e(222),e(220)),d=(e(350),e(353)),c=(e(351),e(352)),u=(e(215),e(203)),h=(e(207),e(209)),f=(e(204),e(199)),p=(e(213),e(214));function m(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var v={name:"ShopOrderItemAddNormal",components:(s={},m(s,p.a.name,p.a),m(s,f.a.name,f.a),m(s,h.a.name,h.a),m(s,u.a.name,u.a),m(s,c.a.name,c.a),m(s,d.a.name,d.a),m(s,l.a.name,l.a),m(s,r.a.name,r.a),m(s,o.a.name,o.a),m(s,n.a.name,n.a),s),data:function(){return{activeKey:0,classify:[],pga:0,pgaList:[],forma:{index:-1,radio:0,number:"",unit:[],placeholder:"点击选择废品/垃圾分类"},dataset:{show:!1,loading:!0,finished:!1,page:0,limit:30,total:0,items:[],itemsData:[]}}},mounted:function(){this.controllerRequestOfferList()},methods:{controllerRequestChildOfferList:function(){var t=this;if(!(this.pga<=0)){var a={page:this.dataset.page,list_rows:this.dataset.limit,pga:this.pga,token:this.$store.state.options.user.token};this.$util.postRequestInterface("/api/home/garbage/getlist",a,(function(a){var e=[];!function(t){var a=!0,i=!1,s=void 0;try{for(var n,o=t[Symbol.iterator]();!(a=(n=o.next()).done);a=!0){var r=n.value;e.push({id:r.id,idList:r.pgalist,title:r.name,pga:r.pga,oda:r})}}catch(t){i=!0,s=t}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}}(a.data.data),t.dataset.itemsData=e,t.dataset.items=a.data.data,t.dataset.items.length>=a.data.count&&(t.dataset.finished=!0),t.dataset.loading=!1}))}},controllerRequestOfferList:function(){var t=this,a={page:this.dataset.page,list_rows:this.dataset.limit,pga:0,token:this.$store.state.options.user.token};this.$util.postRequestInterface("/api/home/garbage/getlist",a,(function(a){var e=[];!function(t){var a=!0,i=!1,s=void 0;try{for(var n,o=t[Symbol.iterator]();!(a=(n=o.next()).done);a=!0){var r=n.value;e.push({id:r.id,idList:r.pgalist,title:r.name,pga:r.pga})}}catch(t){i=!0,s=t}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}}(a.data.data),t.classify=e,t.pga=e[0].id}))},eventClickSelectType:function(t,a){this.dataset.show=!1,this.forma.placeholder=t,this.forma.index=a,this.forma.unit=this.dataset.items[a].danwei},eventGoBackOperate:function(){this.pga=this.pgaList.pop()||0},eventClickAddShopCartItem:function(){var t=this;if(this.forma.number&&-1!=this.forma.index){var a=this.forma.index,e=this.dataset.itemsData[a];if(e.unitIndex=this.forma.radio,e.unit=e.oda.danwei[e.unitIndex].danweiming,e.number=this.forma.number,"stock"==this.$store.state.shop.operateMode){var i={u_id:"",garbageid:e.idList,token:this.$store.state.options.user.token,danweiming:e.unit,number:e.number};this.$util.postRequestInterface("/api/home/user/addStock",i,(function(a){t.$router.go(-1)}))}else this.$store.commit("shop/addShopCartsItem",e),this.$router.go(-1)}else this.$toast("请选择分类单位并填写")}},watch:{pga:function(t,a){this.pgaList.indexOf(t)<0&&t>0&&this.pgaList.push(t),this.dataset.page=0,this.dataset.items=[],this.dataset.finished=!1,this.dataset.loading=!1,this.controllerRequestChildOfferList()},"forma.index":function(t,a){this.forma.placeholder=this.dataset.itemsData[t].title,this.dataset.show=!1},"dataset.show":function(t,a){t&&0==this.dataset.page&&this.controllerRequestChildOfferList()}}},g=(e(504),e(16)),b=Object(g.a)(v,i,[],!1,null,"e07cea62",null);b.options.__file="src/views/shop/order-item-add-normal.vue";a.default=b.exports}}]);