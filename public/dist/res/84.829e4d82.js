(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{314:function(t,e,n){},436:function(t,e,n){"use strict";var a=n(314);n.n(a).a},590:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"waiting-point-map"},[n("div",{attrs:{id:"container"}}),t._v(" "),n("div",{staticClass:"address"},[n("p",{},[t._v(t._s(t.neighborhood))]),t._v(" "),n("p",[t._v(t._s(t.formattedAddress))])]),t._v(" "),n("tab-group",{attrs:{dataset:t.navButtonGroup,index:"1",identity:"2"}})],1)};a._withStripped=!0;var o={name:"waiting-point-map",components:{TabGroup:n(219).a},data:function(){return{navButtonGroup:[{name:"门店订单",route:{path:"/salesman/index"}},{name:"待取点",route:{path:"/salesman/waiting-point-map"}},{name:"查询报价",route:{path:"/salesman/enquiry-quotation"}},{name:"个人中心",route:{path:"/salesman/personal-center"}}],neighborhood:"暂无名称",formattedAddress:"暂无详细地址，请点击门店显示",map:null,geocoder:null}},mounted:function(){this.initializationLoadAmapSourceOperate().then(this.reqeustShopWaitingPointData).then(this.settingWaitingPointOperate).catch((function(t){console.log(t)}))},methods:{initializationLoadAmapSourceOperate:function(){var t=this;return new Promise((function(e,n){t.$util.loadSourceUrl({mode:"script",url:"https://webapi.amap.com/maps?v=1.4.15&key=1ee27ce137e72c3a50fdfa27cb2214f4&plugin=AMap.Geocoder",name:"gaode-map",resolve:e,reject:n})}))},reqeustShopWaitingPointData:function(){var t=this;return new Promise((function(e,n){var a={token:t.$store.state.options.user.token};t.$util.postRequestInterface("/api/home/order/ordermap",a,{success:function(t){e(t)},fail:n})}))},settingWaitingPointOperate:function(t){var e=this;if(this.map||(this.map=new AMap.Map("container",{resizeEnable:!0,zoom:15})),""!=t.data){var n=t.data,a=n[0],o=a.longitude,i=a.latitude,r=!0,s=!1,u=void 0;try{for(var c,l=function(){var t=c.value,n='<p class="map-sign-title">'+t.username+"</p>",a='<p class="map-sign-number">重量：'+t.zweight+"</p>",o='<p class="map-sign-number">数量：'+t.znumber+"</p>",i=Number(t.znumber)>0?o:a,r=new AMap.Text({text:n+i,anchor:"center",draggable:!1,cursor:"pointer",angle:0,style:{padding:"1rem","margin-bottom":"1rem","border-radius":".25rem","background-color":"white","border-width":0,"box-shadow":"0 2px 6px 0 rgba(114, 124, 245, .5)","text-align":"center","font-size":"1.3rem",color:"#333333"},position:new AMap.LngLat(t.longitude,t.latitude)});r.on("click",(function(n){e.controllerSetAddresDetails(n,t)})),r.setMap(e.map)},p=n[Symbol.iterator]();!(r=(c=p.next()).done);r=!0)l()}catch(t){s=!0,u=t}finally{try{!r&&p.return&&p.return()}finally{if(s)throw u}}n.length>0&&this.map.setCenter(new AMap.LngLat(o,i))}else this.$toast(t.msg)},requestGetUserLocationData:function(t){var e=this;return new Promise((function(n,a){e.geocoder||(e.geocoder=new AMap.Geocoder({radius:100,extensions:"all"})),e.geocoder.getAddress([t.longitude,t.latitude],(function(t,e){"complete"==t&&"OK"==e.info&&e.regeocode?n(e):a()}))}))},controllerSetAddresDetails:function(t,e){var n=this,a=t.lnglat,o=a.lat,i=a.lng;this.requestGetUserLocationData({longitude:i,latitude:o}).then((function(t){n.$router.push({path:"/salesman/collect-details",query:{ordernumber:e.ordernumber}})})).catch((function(t){n.$toast("获取位置信息失败")}))}}},i=(n(436),n(16)),r=Object(i.a)(o,a,[],!1,null,null,null);r.options.__file="src/views/salesman/waiting-point-map.vue";e.default=r.exports}}]);