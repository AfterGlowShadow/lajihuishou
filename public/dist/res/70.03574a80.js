(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{258:function(t,e,a){"use strict";a(167),a(259)},259:function(t,e,a){},267:function(t,e,a){"use strict";var s=a(7),o=a.n(s),i=a(9),n=a(14),l=a(195),c={size:String,value:null,loading:Boolean,disabled:Boolean,activeColor:String,inactiveColor:String,activeValue:{type:null,default:!0},inactiveValue:{type:null,default:!1}},r=a(8),u=a(18),d=Object(i.a)("switch"),h=d[0],k=d[1];function v(t,e,a,s){var i=e.size,c=e.value,d=e.loading,h=e.disabled,v=e.activeColor,m=e.activeValue,p=e.inactiveColor,f=e.inactiveValue,g=c===m,b={fontSize:Object(n.a)(i),backgroundColor:g?v:p},S=g?v||l.a:p||l.h;return t("div",o()([{class:k({on:g,disabled:h}),attrs:{role:"switch","aria-checked":String(g)},style:b,on:{click:function(t){if(Object(r.a)(s,"click",t),!h&&!d){var e=g?f:m;Object(r.a)(s,"input",e),Object(r.a)(s,"change",e)}}}},Object(r.b)(s)]),[t("div",{class:k("node")},[d&&t(u.a,{class:k("loading"),attrs:{color:S}})])])}v.props=c;e.a=h(v)},374:function(t,e,a){},510:function(t,e,a){"use strict";var s=a(374);a.n(s).a},563:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stock-manage"},[a("van-list",{attrs:{finished:t.stock.finished,"finished-text":"没有更多了"},on:{load:t.controllerRequestStockData},model:{value:t.stock.loading,callback:function(e){t.$set(t.stock,"loading",e)},expression:"stock.loading"}},[t._l(t.stock.items,(function(e,s){return a("order-list-by-delete",{key:s,staticClass:"list-item bottom-ash-line",attrs:{index:s,title:e.title,weight:e.weight,number:e.number},on:{onSelectState:t.eventOnSelectItemOperate,onDelete:t.eventOnItemDelete}})})),t._v(" "),0==t.stock.items.length?a("p",{staticClass:"stock-empty"},[t._v("还没有库存，请先添加！")]):t._e()],2),t._v(" "),a("van-button",{staticClass:"plus-predict-price full-width",attrs:{icon:"plus",type:"primary",text:"添加库存"},on:{click:t.eventClickAddStockItem}}),t._v(" "),a("div",{staticClass:"page-bottom-bar"},[a("div",{staticClass:"flex-item check-all-select"},[a("van-checkbox",{model:{value:t.allSelectState,callback:function(e){t.allSelectState=e},expression:"allSelectState"}},[t._v("全选")])],1),t._v(" "),a("div",{staticClass:"flex-item tip-message"},[t._v("已选择 "+t._s(t.$store.state.shop.stock.select.length)+" 条数据")]),t._v(" "),a("div",{staticClass:"flex-item"},[a("span",{staticClass:"bar-button bar-button-green",on:{click:t.eventClickDeleteSelectItem}},[t._v("删除选中")])])])],1)};s._withStripped=!0;a(241);var o,i=a(242),n=(a(258),a(267)),l=(a(197),a(198)),c=(a(204),a(199)),r=a(416);function u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var d={name:"ShopStockManage",components:(o={},u(o,c.a.name,c.a),u(o,l.a.name,l.a),u(o,n.a.name,n.a),u(o,i.a.name,i.a),u(o,"OrderListByDelete",r.a),o),data:function(){return{stock:{loading:!1,finished:!1,page:0,limit:30,total:0,items:[]}}},computed:{allSelectState:{get:function(){return this.$store.state.shop.stock.allSelect},set:function(){this.$store.commit("shop/setElementValue",[{key:"stock.allSelect",value:!this.$store.state.shop.stock.allSelect}])}}},mounted:function(){this.$store.commit("shop/setElementValue",[{key:"operateMode",value:"stock"},{key:"stock.select",value:[]},{key:"stock.allSelect",value:!1}])},created:function(){this.controllerRequestStockData()},methods:{controllerRequestStockData:function(){var t=this;this.stock.loading=!0;var e={page:this.stock.page,list_rows:this.stock.limit,token:this.$store.state.options.user.token};this.$util.postRequestInterface("/api/home/user/StockList",e,(function(e){if(!e.data)return t.stock.finished=!0,void(t.stock.loading=!1);t.stock.page++,t.stock.total=e.data.count;var a=!0,s=!1,o=void 0;try{for(var i,n=e.data.data[Symbol.iterator]();!(a=(i=n.next()).done);a=!0){var l=i.value;t.stock.items.push({stockItemId:l.id,id:l.garbageid,idList:l.garbagepgalist,title:l.garbagename,pga:l.garbagepga,weight:0==l.weighting_method?l.weighting_num:"",number:1==l.weighting_method?l.weighting_num:""})}}catch(t){s=!0,o=t}finally{try{!a&&n.return&&n.return()}finally{if(s)throw o}}t.stock.items.length>=e.data.count&&(t.stock.finished=!0),t.stock.loading=!1}))},eventClickAddStockItem:function(){this.$store.commit("shop/setElementValue",[{key:"operateMode",value:"stock"}]),this.$router.push("/shop/order-item-add-normal")},eventOnSelectItemOperate:function(t){this.$store.commit("shop/stockSelectItemOperate",t)},eventOnItemDelete:function(t){var e=this,a={id:this.stock.items[t].stockItemId,token:this.$store.state.options.user.token};this.$util.postRequestInterface("/api/home/user/delStock",a,(function(a){e.stock.items.splice(t,1)}))},eventClickDeleteSelectItem:function(){var t=this;if(0!=this.$store.state.shop.stock.select.length){var e=[],a=!0,s=!1,o=void 0;try{for(var i,n=this.$store.state.shop.stock.select[Symbol.iterator]();!(a=(i=n.next()).done);a=!0){var l=i.value;e.push(this.stock.items[l].stockItemId)}}catch(t){s=!0,o=t}finally{try{!a&&n.return&&n.return()}finally{if(s)throw o}}var c={stocklist:JSON.stringify(e),token:this.$store.state.options.user.token};this.$util.postRequestInterface("/api/home/user/bulkdelete",c,(function(a){var s=[],o=!0,i=!1,n=void 0;try{for(var l,c=t.stock.items[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var r=l.value,u=!0,d=!0,h=!1,k=void 0;try{for(var v,m=e[Symbol.iterator]();!(d=(v=m.next()).done);d=!0){var p=v.value;if(r.stockItemId==p){u=!1;break}}}catch(t){h=!0,k=t}finally{try{!d&&m.return&&m.return()}finally{if(h)throw k}}u&&s.push(r)}}catch(t){i=!0,n=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw n}}t.stock.items=s,t.$store.commit("shop/setElementValue",[{key:"stock.select",value:[]},{key:"stock.allSelect",value:!1}])}))}else this.$toast("必须选中一项才可以操作")}}},h=(a(510),a(16)),k=Object(h.a)(d,s,[],!1,null,"9ea3cd6a",null);k.options.__file="src/views/shop/stock-manage.vue";e.default=k.exports}}]);