(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{220:function(t,e,n){"use strict";var o=n(9),i=n(1),s=n(21),a=n(17),r=Object(o.a)("popup"),u=r[0],c=r[1];e.a=u({mixins:[s.a],props:{round:Boolean,duration:Number,closeable:Boolean,transition:String,safeAreaInsetBottom:Boolean,closeIcon:{type:String,default:"cross"},closeIconPosition:{type:String,default:"top-right"},position:{type:String,default:"center"},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},beforeCreate:function(){var t=this,e=function(e){return function(n){return t.$emit(e,n)}};this.onClick=e("click"),this.onOpened=e("opened"),this.onClosed=e("closed")},render:function(){var t,e=arguments[0];if(this.shouldRender){var n=this.round,o=this.position,s=this.duration,r=this.transition||("center"===o?"van-fade":"van-popup-slide-"+o),u={};return Object(i.b)(s)&&(u.transitionDuration=s+"s"),e("transition",{attrs:{name:r},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[e("div",{directives:[{name:"show",value:this.value}],style:u,class:c((t={round:n},t[o]=o,t["safe-area-inset-bottom"]=this.safeAreaInsetBottom,t)),on:{click:this.onClick}},[this.slots(),this.closeable&&e(a.a,{attrs:{role:"button",tabindex:"0",name:this.closeIcon},class:c("close-icon",this.closeIconPosition),on:{click:this.close}})])])}}})},222:function(t,e,n){"use strict";n(167),n(168),n(169)},240:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o={title:String,loading:Boolean,showToolbar:Boolean,cancelButtonText:String,confirmButtonText:String,allowHtml:{type:Boolean,default:!0},visibleItemCount:{type:Number,default:5},itemHeight:{type:Number,default:44},swipeDuration:{type:Number,default:1e3}}},244:function(t,e,n){"use strict";function o(t,e,n){return Math.min(Math.max(t,e),n)}n.d(e,"a",(function(){return o}))},250:function(t,e,n){"use strict";var o=n(280),i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setData(n),this.setRules(e)}return i(t,[{key:"setData",value:function(t){this.data=t}},{key:"setRules",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.cover;for(var i in(void 0===n||n)&&(this.validators={}),t){var s={};s[i]=t[i],this.validators[i]=new o.a(s)}}},{key:"validate",value:function(t,e){var n=this,o=void 0,i=void 0;"function"==typeof t?(o=t,i=e):"function"==typeof e&&(o=e,i=t);var s=i;this.data&&(i?"string"==typeof i?(s={})[i]=this.data[i]:Array.isArray(i)&&(s={},i.forEach((function(t){s[t]=n.data[t]}))):s=this.data);var a=[];if(s)for(var r in s)if(this.validators[r]){var u={};u[r]=s[r],this.validators[r].validate(u,(function(t){t&&a.push(t[0])}))}o&&o(a.length>0,a)}}]),t}();e.a=function(t,e){return new s(t,e)}},254:function(t,e,n){},255:function(t,e,n){"use strict";var o=n(3),i=n(9),s=n(4),a=n(24);function r(t){return Array.isArray(t)?t.map((function(t){return r(t)})):"object"==typeof t?Object(a.a)({},t):t}var u=n(240),c=n(195),l=n(18),h=n(7),d=n.n(h),f=n(1),m=n(244),p=n(23),v=Object(i.a)("picker-column"),g=v[0],b=v[1];function w(t){return Object(f.c)(t)&&t.disabled}var y=g({mixins:[p.a],props:{valueKey:String,allowHtml:Boolean,className:String,itemHeight:Number,defaultIndex:Number,swipeDuration:Number,visibleItemCount:Number,initialOptions:{type:Array,default:function(){return[]}}},data:function(){return{offset:0,duration:0,options:r(this.initialOptions),currentIndex:this.defaultIndex}},created:function(){this.$parent.children&&this.$parent.children.push(this),this.setIndex(this.currentIndex)},destroyed:function(){var t=this.$parent.children;t&&t.splice(t.indexOf(this),1)},watch:{defaultIndex:function(){this.setIndex(this.defaultIndex)}},computed:{count:function(){return this.options.length},baseOffset:function(){return this.itemHeight*(this.visibleItemCount-1)/2}},methods:{onTouchStart:function(t){if(this.touchStart(t),this.moving){var e=function(t){var e=window.getComputedStyle(t),n=e.transform||e.webkitTransform,o=n.slice(7,n.length-1).split(", ")[5];return Number(o)}(this.$refs.wrapper);this.offset=Math.min(0,e-this.baseOffset),this.startOffset=this.offset}else this.startOffset=this.offset;this.duration=0,this.transitionEndTrigger=null,this.touchStartTime=Date.now(),this.momentumOffset=this.startOffset},onTouchMove:function(t){this.moving=!0,this.touchMove(t),"vertical"===this.direction&&Object(s.c)(t,!0),this.offset=Object(m.a)(this.startOffset+this.deltaY,-this.count*this.itemHeight,this.itemHeight);var e=Date.now();e-this.touchStartTime>300&&(this.touchStartTime=e,this.momentumOffset=this.offset)},onTouchEnd:function(){var t=this.offset-this.momentumOffset,e=Date.now()-this.touchStartTime;if(e<300&&Math.abs(t)>15)this.momentum(t,e);else{var n=this.getIndexByOffset(this.offset);this.moving=!1,this.duration=200,this.setIndex(n,!0)}},onTransitionEnd:function(){this.stopMomentum()},onClickItem:function(t){this.moving||(this.duration=200,this.setIndex(t,!0))},adjustIndex:function(t){for(var e=t=Object(m.a)(t,0,this.count);e<this.count;e++)if(!w(this.options[e]))return e;for(var n=t-1;n>=0;n--)if(!w(this.options[n]))return n},getOptionText:function(t){return Object(f.c)(t)&&this.valueKey in t?t[this.valueKey]:t},setIndex:function(t,e){var n=this;t=this.adjustIndex(t)||0,this.offset=-t*this.itemHeight;var o=function(){t!==n.currentIndex&&(n.currentIndex=t,e&&n.$emit("change",t))};this.moving?this.transitionEndTrigger=o:o()},setValue:function(t){for(var e=this.options,n=0;n<e.length;n++)if(this.getOptionText(e[n])===t)return this.setIndex(n)},getValue:function(){return this.options[this.currentIndex]},getIndexByOffset:function(t){return Object(m.a)(Math.round(-t/this.itemHeight),0,this.count-1)},momentum:function(t,e){var n=Math.abs(t/e);t=this.offset+n/.002*(t<0?-1:1);var o=this.getIndexByOffset(t);this.duration=this.swipeDuration,this.setIndex(o,!0)},stopMomentum:function(){this.moving=!1,this.duration=0,this.transitionEndTrigger&&(this.transitionEndTrigger(),this.transitionEndTrigger=null)},genOptions:function(){var t=this,e=this.$createElement,n={height:this.itemHeight+"px"};return this.options.map((function(o,i){var s=t.getOptionText(o),a=w(o),r={style:n,attrs:{role:"button",tabindex:a?-1:0},class:["van-ellipsis",b("item",{disabled:a,selected:i===t.currentIndex})],on:{click:function(){t.onClickItem(i)}}};return t.allowHtml&&(r.domProps={innerHTML:s}),e("li",d()([{},r]),[t.allowHtml?"":s])}))}},render:function(){var t=arguments[0],e={transform:"translate3d(0, "+(this.offset+this.baseOffset)+"px, 0)",transitionDuration:this.duration+"ms",transitionProperty:this.duration?"all":"none",lineHeight:this.itemHeight+"px"};return t("div",{class:[b(),this.className],on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[t("ul",{ref:"wrapper",style:e,class:b("wrapper"),on:{transitionend:this.onTransitionEnd}},[this.genOptions()])])}}),x=Object(i.a)("picker"),C=x[0],I=x[1],k=x[2];e.a=C({props:Object(o.a)({},u.a,{defaultIndex:{type:Number,default:0},columns:{type:Array,default:function(){return[]}},toolbarPosition:{type:String,default:"top"},valueKey:{type:String,default:"text"}}),data:function(){return{children:[]}},computed:{simple:function(){return this.columns.length&&!this.columns[0].values}},watch:{columns:"setColumns"},methods:{setColumns:function(){var t=this;(this.simple?[{values:this.columns}]:this.columns).forEach((function(e,n){t.setColumnValues(n,r(e.values))}))},emit:function(t){this.simple?this.$emit(t,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit(t,this.getValues(),this.getIndexes())},onChange:function(t){this.simple?this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit("change",this,this.getValues(),t)},getColumn:function(t){return this.children[t]},getColumnValue:function(t){var e=this.getColumn(t);return e&&e.getValue()},setColumnValue:function(t,e){var n=this.getColumn(t);n&&n.setValue(e)},getColumnIndex:function(t){return(this.getColumn(t)||{}).currentIndex},setColumnIndex:function(t,e){var n=this.getColumn(t);n&&n.setIndex(e)},getColumnValues:function(t){return(this.children[t]||{}).options},setColumnValues:function(t,e){var n=this.children[t];n&&JSON.stringify(n.options)!==JSON.stringify(e)&&(n.options=e,n.setIndex(0))},getValues:function(){return this.children.map((function(t){return t.getValue()}))},setValues:function(t){var e=this;t.forEach((function(t,n){e.setColumnValue(n,t)}))},getIndexes:function(){return this.children.map((function(t){return t.currentIndex}))},setIndexes:function(t){var e=this;t.forEach((function(t,n){e.setColumnIndex(n,t)}))},onConfirm:function(){this.children.map((function(t){return t.stopMomentum()})),this.emit("confirm")},onCancel:function(){this.emit("cancel")}},render:function(t){var e=this,n=this.itemHeight,o=n*this.visibleItemCount,i=this.simple?[this.columns]:this.columns,a={height:n+"px"},r={height:o+"px"},u={backgroundSize:"100% "+(o-n)/2+"px"},h=this.showToolbar&&t("div",{class:[c.f,I("toolbar")]},[this.slots()||[t("button",{class:I("cancel"),on:{click:this.onCancel}},[this.cancelButtonText||k("cancel")]),this.slots("title")||this.title&&t("div",{class:["van-ellipsis",I("title")]},[this.title]),t("button",{class:I("confirm"),on:{click:this.onConfirm}},[this.confirmButtonText||k("confirm")])]]);return t("div",{class:I()},["top"===this.toolbarPosition?h:t(),this.loading?t(l.a,{class:I("loading")}):t(),this.slots("columns-top"),t("div",{class:I("columns"),style:r,on:{touchmove:s.c}},[i.map((function(n,o){return t(y,{attrs:{valueKey:e.valueKey,allowHtml:e.allowHtml,className:n.className,itemHeight:e.itemHeight,defaultIndex:n.defaultIndex||e.defaultIndex,swipeDuration:e.swipeDuration,visibleItemCount:e.visibleItemCount,initialOptions:e.simple?n:n.values},on:{change:function(){e.onChange(o)}}})})),t("div",{class:I("mask"),style:u}),t("div",{class:[c.g,I("frame")],style:a})]),this.slots("columns-bottom"),"bottom"===this.toolbarPosition?h:t()])}})},293:function(t,e,n){},422:function(t,e,n){"use strict";var o=n(293);n.n(o).a},570:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-full"},[n("div",{staticClass:"regedit-head"},[n("h1",{staticClass:"title"},[t._v("门店注册")]),t._v(" "),n("span",{staticClass:"info-tip",on:{click:function(e){return t.$router.push("/login")}}},[t._v("已有登陆账号")])]),t._v(" "),n("div",{staticClass:"normal-form-container bottom-ash-line"},[n("van-field",{attrs:{type:"tel",placeholder:"请输入手机号（登陆账号）","error-message":t.errorMsg.phone},model:{value:t.forma.phone,callback:function(e){t.$set(t.forma,"phone",e)},expression:"forma.phone"}}),t._v(" "),n("van-field",{attrs:{"error-message":t.errorMsg.checkCode,placeholder:"请输入验证码"},model:{value:t.forma.checkCode,callback:function(e){t.$set(t.forma,"checkCode",e)},expression:"forma.checkCode"}},[n("van-button",{staticClass:"check-button",attrs:{slot:"button",size:"small",disabled:this.countdown>0,"error-message":t.errorMsg.checkCode,type:"primary",round:""},on:{click:t.sendMobileCode},slot:"button"},[t._v(t._s(t.countdownText)+"\n\t\t\t")])],1),t._v(" "),n("van-field",{attrs:{type:"password","error-message":t.errorMsg.password,placeholder:"请输入登录密码"},model:{value:t.forma.password,callback:function(e){t.$set(t.forma,"password",e)},expression:"forma.password"}}),t._v(" "),n("van-field",{attrs:{type:"password","error-message":t.errorMsg.repassword,placeholder:"请确认登录密码"},model:{value:t.forma.repassword,callback:function(e){t.$set(t.forma,"repassword",e)},expression:"forma.repassword"}})],1),t._v(" "),n("div",{staticClass:"normal-form-container"},[n("van-field",{staticClass:"el-mt-10",attrs:{placeholder:"请输入联系人姓名","error-message":t.errorMsg.realname},model:{value:t.forma.realname,callback:function(e){t.$set(t.forma,"realname",e)},expression:"forma.realname"}}),t._v(" "),n("van-field",{attrs:{placeholder:"请输入门店名称","error-message":t.errorMsg.shopName},model:{value:t.forma.shopName,callback:function(e){t.$set(t.forma,"shopName",e)},expression:"forma.shopName"}}),t._v(" "),n("van-field",{attrs:{"error-message":t.errorMsg.address,placeholder:"请输入门店所在详细地址"},model:{value:t.forma.address,callback:function(e){t.$set(t.forma,"address",e)},expression:"forma.address"}},[n("van-button",{staticClass:"map-button",attrs:{slot:"button",size:"small",type:"primary",round:""},on:{click:t.eventClickMapSelectAddress},slot:"button"},[t._v("地图选址")])],1),t._v(" "),n("van-field",{attrs:{placeholder:"点击选择门店所在地区（省/市/区县）","error-message":t.errorMsg.area},on:{click:function(e){t.showArea=!0}},model:{value:t.area,callback:function(e){t.area=e},expression:"area"}})],1),t._v(" "),n("div",{staticClass:"normal-form-button-container el-mt-30"},[n("van-button",{staticClass:"green-background font-size-17 edge-angle-normal",attrs:{type:"primary",size:"large"},on:{click:t.onClickRegeditShop}},[t._v("立即注册")])],1),t._v(" "),n("van-popup",{attrs:{position:"bottom"},model:{value:t.showArea,callback:function(e){t.showArea=e},expression:"showArea"}},[n("van-area",{attrs:{value:t.regionCode,"area-list":t.areaList},on:{confirm:t.confirmArea,cancel:t.cancelArea}})],1)],1)};o._withStripped=!0;n(22);var i,s=n(5),a=(n(222),n(220)),r=(n(279),n(282)),u=(n(204),n(199)),c=(n(207),n(209)),l=(n(213),n(214)),h=n(250),d=n(281);function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m={name:"ShopIndex",components:(i={},f(i,l.a.name,l.a),f(i,c.a.name,c.a),f(i,u.a.name,u.a),f(i,r.a.name,r.a),f(i,a.a.name,a.a),i),data:function(){return{countdown:0,countdownText:"验证码",showArea:!1,area:"",areaList:d.a,regionCode:"",forma:{phone:"",checkCode:"",password:"",repassword:"",realname:"",shopName:"",address:"",longitude:"",latitude:"",province:"",city:"",area:""},errorMsg:{phone:"",checkCode:"",password:"",repassword:"",realname:"",name:"",shopName:"",area:"",address:""},rules:{phone:[{validator:function(t,e,n){e?/^[1][0-9]{10}$/.test(e)?n():n("请输入正确的手机号码"):n("请输入手机号码")}}],checkCode:[{required:!0,message:"请输入验证码"}],password:[{required:!0,message:"请输入登录密码"}],repassword:[{required:!0,message:"请输入确认登录密码"}],realname:[{required:!0,message:"请输入联系人姓名"}],shopName:[{required:!0,message:"请输入门店名称"}],area:[{required:!0,message:"请选择门店所在地区"}],address:[{required:!0,message:"请输入门店所在详细地址"}]}}},created:function(){var t=JSON.parse(localStorage.getItem("userRegedit"));t&&(this.forma=t,localStorage.removeItem("userRegedit")),this.validator=Object(h.a)(this.rules,this.forma)},mounted:function(){var t=this;if(this.getAddress(),this.$route.params.name){this.forma.address=this.$route.params.name;var e=String(this.$route.params.location).split(",");this.forma.longitude=e[0],this.forma.latitude=e[1],this.initializationLoadAmapSourceOperate({longitude:e[0],latitude:e[1]}).then(this.requestGetUserLocationData).then((function(e){var n=e.result.regeocode.addressComponent,o=n.city,i=n.district,s=n.province,a=n.adcode;t.forma.area=s+"-"+o+"-"+i,t.regionCode=a,t.forma.area=a})).catch((function(t){console.log(t)}))}},methods:{getAddress:function(){var t=this;this.$util.postRequestInterface("/api/citylist",{},(function(e){t.areaList=e.data}))},confirmArea:function(t){this.showArea=!1,this.forma.province=t[0].code,this.forma.city=t[1].code,this.forma.area=t[2].code,this.area=t[0].name+"-"+t[1].name+"-"+t[2].name},cancelArea:function(){this.showArea=!1},resetField:function(t){var e=this;(t=t?Array.isArray(t)?t:[t]:Object.keys(this.errorMsg)).forEach((function(t){e.errorMsg[t]=""}))},validate:function(t,e){var n=this;this.validator.validate((function(e,o){n.resetField(),e&&o.forEach((function(t){n.errorMsg[t.field]=t.message})),t&&t(e,o)}),e)},sendMobileCode:function(){var t=this;this.validate((function(e){if(!e){var n={mobile:t.forma.phone};t.$util.postRequestInterface("/api/home/senMsg",n,(function(t){})),t.countdown=61,t.countdownSubtract()}}),"phone")},countdownSubtract:function(){var t=this;this.countdown>0&&setTimeout((function(){t.countdown-=1,t.countdown>0?(t.countdownText="倒计时"+t.countdown+"s",t.countdownSubtract()):0==t.countdown&&(t.countdownText="验证码")}),1e3)},onClickRegeditShop:function(){var t=this;this.validate((function(e,n){if(!e){if(t.forma.password!=t.forma.repassword)return s.a.fail("请确认登录密码"),!1;var o={name:t.forma.phone,realname:t.forma.realname,phone:t.forma.phone,zhicheng:t.forma.shopName,province:t.forma.province,city:t.forma.city,county:t.forma.area,address:t.forma.address,longitude:1,latitude:1,code:t.forma.checkCode,pwd:t.forma.repassword,openid:"shadow"};t.$util.postRequestInterface("/api/add",o,(function(e){t.$router.push("/login")}))}}))},initializationLoadAmapSourceOperate:function(t){var e=this;return new Promise((function(n,o){e.$util.loadSourceUrl({mode:"script",url:"https://webapi.amap.com/maps?v=1.4.15&key=1ee27ce137e72c3a50fdfa27cb2214f4&plugin=AMap.Geocoder",name:"gaode-map",resolve:function(){n(t)},reject:o})}))},requestGetUserLocationData:function(t){var e=this;return new Promise((function(n,o){e.geocoder||(e.geocoder=new AMap.Geocoder({radius:100,extensions:"all"})),e.geocoder.getAddress([t.longitude,t.latitude],(function(e,i){"complete"===e&&"OK"===i.info&&i.regeocode?n({res:t,result:i}):o()}))}))},eventClickMapSelectAddress:function(){window.localStorage.setItem("userRegedit",JSON.stringify(this.forma)),this.$router.push("/public/map")}}},p=(n(422),n(16)),v=Object(p.a)(m,o,[],!1,null,"39ad611f",null);v.options.__file="src/views/shop/regedit.vue";e.default=v.exports}}]);