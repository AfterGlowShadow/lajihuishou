(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{197:function(t,e,i){"use strict";i(167),i(202)},198:function(t,e,i){"use strict";var n=i(9),s=i(201),o=i(20),r=i(19),a=i(18),l=Object(n.a)("list"),c=l[0],d=l[1],h=l[2];e.a=c({mixins:[Object(o.a)((function(t){this.scroller||(this.scroller=Object(r.c)(this.$el)),t(this.scroller,"scroll",this.check)}))],model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:Number,default:300},direction:{type:String,default:"down"}},data:function(){return{innerLoading:this.loading}},mounted:function(){this.immediateCheck&&this.check()},watch:{finished:"check",loading:function(t){this.innerLoading=t,this.check()}},methods:{check:function(){var t=this;this.$nextTick((function(){if(!(t.innerLoading||t.finished||t.error)){var e,i=t.$el,n=t.scroller,o=t.offset,r=t.direction;if(!((e=n.getBoundingClientRect?n.getBoundingClientRect():{top:0,bottom:n.innerHeight}).bottom-e.top)||Object(s.a)(i))return!1;var a=t.$refs.placeholder.getBoundingClientRect();("up"===r?a.top-e.top<=o:a.bottom-e.bottom<=o)&&(t.innerLoading=!0,t.$emit("input",!0),t.$emit("load"))}}))},clickErrorText:function(){this.$emit("update:error",!1),this.check()},genLoading:function(){var t=this.$createElement;if(this.innerLoading)return t("div",{class:d("loading"),key:"loading"},[this.slots("loading")||t(a.a,{attrs:{size:"16"}},[this.loadingText||h("loading")])])},genFinishedText:function(){var t=this.$createElement;if(this.finished&&this.finishedText)return t("div",{class:d("finished-text")},[this.finishedText])},genErrorText:function(){var t=this.$createElement;if(this.error&&this.errorText)return t("div",{on:{click:this.clickErrorText},class:d("error-text")},[this.errorText])}},render:function(){var t=arguments[0],e=t("div",{ref:"placeholder",class:d("placeholder")});return t("div",{class:d(),attrs:{role:"feed","aria-busy":this.innerLoading}},["down"===this.direction?this.slots():e,this.genLoading(),this.genFinishedText(),this.genErrorText(),"up"===this.direction?this.slots():e])}})},201:function(t,e,i){"use strict";function n(t){return"none"===window.getComputedStyle(t).display||null===t.offsetParent}i.d(e,"a",(function(){return n}))},202:function(t,e,i){},257:function(t,e,i){},291:function(t,e,i){"use strict";var n=i(257);i.n(n).a},414:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"message-list"},[i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoadMsgList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[i("div",{staticClass:"messageList_container"},t._l(t.msgList,(function(e,n){return i("div",{key:n,staticClass:"messageList_cycle",on:{click:function(i){return t.eventClickMsgDetails(e.id)}}},[i("div",{staticClass:"messageList_cycle_top"},[i("span",[t._v(t._s(e.title))])]),t._v(" "),i("div",{staticClass:"messageList_cycle_down"},[i("span",[t._v("点击查看内容")]),t._v(" "),i("span",[t._v(t._s(e.time))])])])})),0)])],1)};n._withStripped=!0;i(197);var s=i(198);var o,r,a,l={name:"message-list",components:(o={},r=s.a.name,a=s.a,r in o?Object.defineProperty(o,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[r]=a,o),data:function(){return{page:0,list_rows:10,loading:!1,finished:!1,msgList:[]}},methods:{onLoadMsgList:function(){var t=this,e=this,i={page:this.page,list_rows:this.list_rows,token:this.$store.state.options.user.token};this.$util.postRequestInterface("/api/home/message/getnoread",i,(function(i){if(e.page=e.page+1,Array.isArray(i.data)){var n=!0,s=!1,o=void 0;try{for(var r,a=i.data.data[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var l=r.value;e.msgList.push({id:l.id,title:l.title,info:l.info,time:e.$moment(1e3*l.create_time).format("YYYY-MM-DD HH:mm:ss"),isread:l.isread})}}catch(t){s=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(s)throw o}}}e.loading=!1,e.msgList.length>=i.data.count&&(e.finished=!0),0==t.msgList.length&&t.$store.commit("options/setElementValue",[{key:"notice.show",value:!1}])}))},eventClickMsgDetails:function(t){this.$router.push({path:"/public/message-detail",query:{id:t}})}}},c=(i(291),i(16)),d=Object(c.a)(l,n,[],!1,null,"778d1d60",null);d.options.__file="src/views/public/message-list.vue";e.default=d.exports}}]);